<template>
    <lightning-card title="Delete Opportunities" icon-name="standard:opportunity">
        <div class="slds-var-m-around_medium">

            <lightning-spinner
                lwc:if={isLoading}
                alternative-text="Loading"
                size="small"
                variant="brand">
            </lightning-spinner>

            <template lwc:if={errors}>
                <div class="slds-text-color_error slds-var-m-bottom_small">
                    {errors}
                </div>
            </template>

            <template lwc:if={opportunities}>
                <template for:each={opportunities} for:item="opp">
                    <lightning-layout
                        key={opp.Id}
                        class="slds-var-m-vertical_x-small">

                        <lightning-layout-item flexibility="grow">
                            {opp.Name} â€” {opp.Stage}
                        </lightning-layout-item>

                        <lightning-layout-item>
                            <lightning-button-icon
                                icon-name="utility:delete"
                                alternative-text="Delete"
                                onclick={handleDeleteOpportunity}
                                data-id={opp.Id}
                                data-name={opp.Name}>
                            </lightning-button-icon>
                        </lightning-layout-item>

                    </lightning-layout>
                </template>
            </template>

            <template lwc:if={noOpportunities}>
                <p class="slds-text-color_weak">No opportunities found.</p>
            </template>

        </div>
    </lightning-card>
</template>
