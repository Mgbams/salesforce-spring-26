<template>
    <lightning-card title="Opportunity Stage Manager" icon-name="standard:opportunity">
        <div class="slds-var-m-around_medium">

            <lightning-spinner
                lwc:if={isLoading}
                alternative-text="Loading"
                size="small">
            </lightning-spinner>

            <!-- Error -->
            <template lwc:if={errors}>
                <div class="slds-text-color_error slds-var-m-bottom_small">
                    {errors}
                </div>
            </template>

            <!-- Opportunity Selection -->
            <template lwc:if={opportunityOptions}>
                <lightning-combobox
                    label="Select Opportunity"
                    value={selectedOpportunityId}
                    options={opportunityOptions}
                    onchange={handleOpportunityChange}
                    class="slds-var-m-bottom_small">
                </lightning-combobox>

                <lightning-combobox
                    label="New Stage"
                    value={selectedStage}
                    options={stageOptions}
                    onchange={handleStageChange}
                    class="slds-var-m-bottom_small">
                </lightning-combobox>

                <lightning-button
                    label="Update Stage"
                    variant="brand"
                    onclick={handleUpdate}
                    disabled={isUpdateDisabled}>
                </lightning-button>

            </template>

        </div>
    </lightning-card>
</template>
